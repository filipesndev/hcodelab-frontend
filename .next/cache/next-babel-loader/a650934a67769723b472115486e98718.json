{"ast":null,"code":"import axios from 'axios';\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nconst cookies = new Cookies();\nconst serverUrl = 'http://127.0.0.1:3333';\nexport async function handleAuthSSR(ctx) {\n  let token = null;\n\n  if (ctx.req) {\n    token = ctx.req.headers.cookie.replace(/(?:(?:^|.*;\\s*)token\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n  } else {\n    token = cookies.get('token');\n  }\n\n  try {\n    const config = {\n      header: {\n        Autorization: `Bearer ${token}`\n      }\n    };\n    await axios.get(serverUrl + '/admin/users', config).then(res => console.log(res)).catch(err => console.log(err));\n  } catch (err) {\n    console.log('redirecionando');\n\n    if (ctx.res) {\n      ctx.res.writeHead(302, {\n        Location: '/'\n      });\n      ctx.res.end();\n    } else {\n      Router.push('/admin');\n    }\n  }\n}","map":null,"metadata":{},"sourceType":"module"}